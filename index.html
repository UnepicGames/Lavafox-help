<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LavaFox Browser</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
  input, button, select { padding: 10px; margin: 5px 0; width: 100%; max-width: 400px; }
  #output { white-space: pre-line; margin-top: 10px; }
</style>
</head>
<body>

<h2>Welcome to LavaFox</h2>
<p>Please do not use capital letters.</p>

<input type="text" id="websiteInput" placeholder="Enter a website or command" autocomplete="off" />
<button onclick="processInput()">Go</button>

<div id="output"></div>

<script>
  let password = "";
  let searchEngine = "google";
  let blocked = [];

  const output = document.getElementById("output");
  const websiteInput = document.getElementById("websiteInput");

  function log(message) {
    output.textContent += message + "\n";
  }

  function clearLog() {
    output.textContent = "";
  }

  function openLink(url) {
    window.open(url, "_blank");
  }

  function processInput() {
    const website = websiteInput.value.trim().toLowerCase();
    websiteInput.value = "";

    if (!website) return;

    clearLog();

    if (website === "/exit/") {
      log("Goodbye!");
      setTimeout(() => {
        openLink("https://www.youtube.com/watch?v=dQw4w9WgXcQ");
      }, 1000);
      return;
    }

    if (website === "/help/") {
      log("Commands:\n" +
          "/parentalcontrols/ - block websites or set password\n" +
          "/exit/ - exit with a surprise video\n" +
          "/browser/ or /search engine/ - change your search engine\n" +
          "Or enter a website to go to it.");
      return;
    }

    if (website === "/parentalcontrols/") {
      parentalControls();
      return;
    }

    if (website === "/search engine/" || website === "/browser/") {
      changeSearchEngine();
      return;
    }

    if (blocked.includes(website)) {
      log("This website is blocked.");
      return;
    }

    if (website.startsWith("https://") || website.startsWith("http://")) {
      openLink(website);
    } else {
      let url;
      if (searchEngine === "google") {
        url = "https://www.google.com/search?q=" + encodeURIComponent(website);
      } else if (searchEngine === "duckduckgo") {
        url = "https://duckduckgo.com/?q=" + encodeURIComponent(website);
      } else if (searchEngine === "bing" || searchEngine === "microsoft bing") {
        url = "https://www.bing.com/search?q=" + encodeURIComponent(website);
      } else {
        url = "https://www.google.com/search?q=" + encodeURIComponent(website);
      }
      openLink(url);
    }
  }

  function parentalControls() {
    if (password) {
      let entered = prompt("You have set a password, please enter it:");
      if (entered !== password) {
        log("Incorrect password.");
        return;
      }
    }
    let action = prompt("Would you like to block a website or set a password? (Enter 'password' or 'block')");
    if (!action) return;

    action = action.toLowerCase();
    if (action === "password") {
      let newPass = prompt("Enter a new password:");
      if (newPass) {
        password = newPass;
        log("Password set successfully.");
      } else {
        log("Password not changed.");
      }
    } else if (action === "block") {
      let siteToBlock = prompt("Enter a website to block (cannot be undone!):").toLowerCase();
      if (siteToBlock && !blocked.includes(siteToBlock)) {
        blocked.push(siteToBlock);
        log("Website '" + siteToBlock + "' blocked.");
      } else {
        log("Invalid or already blocked website.");
      }
    } else {
      log("Invalid action.");
    }
  }

  function changeSearchEngine() {
    log("Your current search engine is: " + searchEngine);
    let newEngine = prompt("Choose your search engine (google, microsoft bing or bing, duckduckgo):");
    if (!newEngine) return;
    newEngine = newEngine.toLowerCase();
    if (["google", "duckduckgo", "bing", "microsoft bing"].includes(newEngine)) {
      searchEngine = newEngine;
      log("Search engine changed to " + searchEngine);
    } else {
      log("Invalid search engine choice. Keeping current selection.");
    }
  }

  websiteInput.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      processInput();
    }
  });
</script>

</body>
</html>
